// Generated by CoffeeScript 1.12.7
(function() {
  $(function() {
    return app.initialize();
  });

  window.app = {
    my_hand: 0,
    your_hand: 0,
    my_life: 5,
    your_life: 5,
    your_hand_string: "",
    all_result: "",
    final_result: "",
    initialize: function() {
      this.beginTitle();
      this.mySetBind();
      this.checkLife();
      this.resetGame();
      return this.returnTitle();
    },
    beginTitle: function() {
      $('#start-button').click(function() {
        $('#start-title').css('display', 'none');
        return $('#game-screen').css('display', 'block');
      });
      return $('service-button').click(function() {
        $('h1').css('display', 'none');
        $("#start-button").css('display', 'none');
        return $("#service-button").css('display', 'none');
      });
    },
    mySetBind: function() {
      $('#gu').bind('click', (function(_this) {
        return function() {
          return _this.putAllHands("ryu_gu", 0);
        };
      })(this));
      $('#choki').bind('click', (function(_this) {
        return function() {
          return _this.putAllHands("ryu_choki", 1);
        };
      })(this));
      return $('#pa').bind('click', (function(_this) {
        return function() {
          return _this.putAllHands("ryu_pa", 2);
        };
      })(this));
    },
    putAllHands: function(hand, my_hand) {
      this.my_hand = my_hand;
      this.choiceYouHand();
      this.changeMyHand(hand);
      this.showResult();
      this.checkLife();
      return this.announceFinal();
    },
    changeMyHand: function(hand) {
      return $('#my').html("<img src=\"./image/" + hand + ".gif\">");
    },
    choiceYouHand: function() {
      var your_hand_string;
      this.your_hand = _.random(0, 2);
      your_hand_string = ["ken_gu", "ken_choki", "ken_pa"];
      return $('#you').html("<img src=\"./image/" + your_hand_string[this.your_hand] + ".gif\">");
    },
    showResult: function() {
      var diff_hands;
      diff_hands = this.your_hand - this.my_hand;
      if ((diff_hands === -2) || (diff_hands === 1)) {
        this.all_result = "勝利";
      } else if (diff_hands === 0) {
        this.all_result = "アイコ";
      } else if ((diff_hands === -1) || (diff_hands === 2)) {
        this.all_result = "敗北";
      }
      return $('#result').html("<h>" + this.all_result + "</h>");
    },
    checkLife: function() {
      if (this.all_result === "勝利") {
        this.your_life = this.your_life - 1;
      } else if (this.all_result === "敗北") {
        this.my_life = this.my_life - 1;
      }
      this.changemyHeart();
      return this.changeyourHeart();
    },
    changemyHeart: function() {
      var i, j, myHeart, ref;
      myHeart = "";
      for (i = j = 0, ref = this.my_life; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
        console.log("test");
        myHeart = myHeart + "❤️";
        console.log("zikken");
      }
      console.log(myHeart);
      return $('#my-life').html("<h>" + myHeart + "</h>");
    },
    changeyourHeart: function() {
      var i, j, ref, yourHeart;
      yourHeart = "";
      for (i = j = 0, ref = this.your_life; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
        yourHeart = yourHeart + "❤️";
      }
      return $('#your-life').html("<h>" + yourHeart + "</h>");
    },
    announceFinal: function() {
      if (this.your_life === 0) {
        this.lockButton("You Win!!");
      } else if (this.my_life === 0) {
        this.lockButton("You Lose…");
      }
      return $('#final-result').html("<h>" + this.final_result + "</h>");
    },
    lockButton: function(final_result) {
      this.final_result = final_result;
      return $('#gu, #choki, #pa').unbind('click');
    },
    resetGame: function() {
      return $('#reset-button').bind('click', (function(_this) {
        return function() {
          $('#my').html("<img src=\"./image/ryu_stand.gif\">");
          $('#you').html("<img src=\"./image/ken_stand.gif\">");
          _this.my_life = 5;
          _this.changemyHeart();
          _this.your_life = 5;
          _this.changeyourHeart();
          $('#result').html("いざ、尋常に勝負！！");
          $('#final-result').html("最終結果");
          if ((_this.final_result === "You Win!!") || (_this.final_result === "You Lose…")) {
            console.log("invalid");
            _this.mySetBind();
            return _this.final_result = "";
          }
        };
      })(this));
    },
    returnTitle: function() {
      return $('#title-button').bind('click', (function(_this) {
        return function() {
          $('#game-screen').css('display', 'none');
          $('#start-title').css('display', 'block');
          $('#my').html("<img src=\"./image/ryu_stand.gif\">");
          $('#you').html("<img src=\"./image/ken_stand.gif\">");
          _this.my_life = 5;
          _this.changemyHeart();
          _this.your_life = 5;
          _this.changeyourHeart();
          $('#result').html("いざ、尋常に勝負！！");
          $('#final-result').html("最終結果");
          if ((_this.final_result === "You Win!!") || (_this.final_result === "You Lose…")) {
            console.log("invalid");
            _this.mySetBind();
            return _this.final_result = "";
          }
        };
      })(this));
    }
  };

}).call(this);
